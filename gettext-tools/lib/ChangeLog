2003-03-30  Bruno Haible  <bruno@clisp.org>

	* xgetcwd.c: Include <unistd.h>.

2003-04-03  Bruno Haible  <bruno@clisp.org>

	* w32spawn.h (dup_noinherit): Signal an error instead of returning -1.
	* execute.c: Reorder includes.
	* pipe-bidi.c: Likewise.
	* pipe-in.c: Likewise.
	* pipe-out.c: Likewise.

2003-04-02  Bruno Haible  <bruno@clisp.org>

	* binary-io.h: Cosmetics. Suggested by Jim Meyering.

2003-03-30  Bruno Haible  <bruno@clisp.org>

	* Makefile.vms: New file.
	* Makefile.am (EXTRA_DIST): Add Makefile.vms.
	* execute.c (open): #undef before redefining it. Needed for VMS.
	* pipe-in.c (open): Likewise.
	* pipe-out.c (open): Likewise.

2003-03-31  Bruno Haible  <bruno@clisp.org>

	* sh-quote.c (shell_quote_length, shell_quote_copy): Handle empty
	argument string correctly.

2003-03-30  Bruno Haible  <bruno@clisp.org>

	* progname.c (ISSLASH, HAS_DEVICE, IS_PATH_WITH_DIR,
	FILESYSTEM_PREFIX_LEN): New macros.
	(maybe_executable): Make a nop on Woe32.
	(find_executable) [WIN32]: Fix compilation.

	* relocatable.h (RELOCATABLE_DLL_EXPORTED): New macro.

	* w32spawn.h: New file.
	* execute.c: Add alternative implementation using native Woe32 API.
	* pipe-bidi.c: Likewise.
	* pipe-in.c: Likewise.
	* pipe-out.c: Likewise.
	* wait-process.c: Likewise.
	* Makefile.am (libgettextlib_la_SOURCES): Add w32spawn.h.

	* pipe.h (DEV_NULL): New macro.
	* javacomp.c (compile_java_class): Use DEV_NULL instead of "/dev/null".

	* pipe-bidi.c (STDERR_FILENO): Provide a fallback value.
	* pipe-in.c (STDERR_FILENO): Likewise.
	* pipe-out.c (STDERR_FILENO): Likewise.

	* copy-file.c (copy_file_preserving): Don't set owner if the function
	chown() doesn't exist.

2003-03-17  Bruno Haible  <bruno@clisp.org>

	Native Woe32/MSVC support.
	* Makefile.msvc: New file.
	* Makefile.am (EXTRA_DIST): Add it.

2003-03-28  Bruno Haible  <bruno@clisp.org>

	* copy-file.h (copy_file_preserving): Renamed from copy_file.
	* copy-file.c (copy_file_preserving): Renamed from copy_file.
	Preserve the owner and group as well.

2003-02-28  Bruno Haible  <bruno@clisp.org>

	Support for relocatable installation.
	* canonicalize.h: New file.
	* canonicalize.c: New file, from glibc 2.3.1 with modifications.
	* relocatable.h: New file.
	* relocatable.c: New file.
	* relocwrapper.c: New file.
	* strerror.c: New file, from gnulib with modifications.
	* xreadlink.h: New file, from gnulib with modifications.
	* xreadlink.c: New file, from gnulib with modifications.
	* progname.h (set_program_name_and_installdir): New declaration.
	(set_program_name) [ENABLE_RELOCATABLE]: Define as macro.
	(get_full_program_name): New declaration.
	* progname.c: Include xreadlink.h, canonicalize.h, relocatable.h.
	(executable_fd): New variable.
	(maybe_executable): New function.
	(find_executable): New function.
	(executable_fullname): New variable.
	(prepare_relocate): New function.
	(set_program_name_and_installdir): New function.
	(get_full_program_name): New function.
	* localcharset.c: Include relocatable.h.
	(get_charset_aliases): Relocate LIBDIR value.
	* xmalloc.h (xalloc_die): New declaration.
	* xmalloc.c (xalloc_die): New function.
	(fixup_null_alloc): Use it.
	* Makefile.am (libgettextlib_la_SOURCES): Add xreadlink.h, xreadlink.c.
	(LIBADD_SOURCE): Add canonicalize.h, canonicalize.c, memmove.c,
	relocatable.h, relocatable.c, strerror.c.
	(UNUSED_SOURCE): Remove memmove.c.
	(EXTRA_DIST): Add relocwrapper.c.

2003-02-28  Bruno Haible  <bruno@clisp.org>

	* localcharset.h: Change copyright to LGPL. Enclose declaration in
	extern "C", for C++ compilers.
	* localcharset.c: Drop C linkage declaration.

2003-01-29  Bruno Haible  <bruno@clisp.org>

	* config.charset: Add an alias for CP1251 on Solaris.
	Reported by Hidetoshi Tajima <hidetoshi.tajima@sun.com>.

2003-02-18  Bruno Haible  <bruno@clisp.org>

	* copy-file.c: Include safe-read.h.
	(copy_file): Simplify code by using safe_read() instead of read().

2003-02-12  Bruno Haible  <bruno@clisp.org>

	* Makefile.am (EXTRA_DIST): Add ChangeLog.0.


See ChangeLog.0 for earlier changes.
